<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="185,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T100U3">tree</span> = growCCTnotRecursive(<span class="var type1" id="S3T52U6">XTrain</span>,<span class="var type1" id="S4T1U7">YTrain</span>,<span class="var type1" id="S5T55U8">options</span>,<span class="var type1" id="S6T51U9">iFeatureNum</span>,<span class="mxinfo" id="T4:U6"><span class="var type2" id="S7T4V1U10">depth</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="185,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%growTree grows a CCT, recursively calling itself until leaves are reached</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,4" id="srcline4">  4</a></span><span class="line"><span class="comment">% function CCT = growCCT(XTrain,YTrain,options,iFeatureNum,depth)</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,5" id="srcline5">  5</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,6" id="srcline6">  6</a></span><span class="line"><span class="comment">% Function applies greedy splitting according to the CCT algorithm and the</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,7" id="srcline7">  7</a></span><span class="line"><span class="comment">% provided options structure.  This is equivalent to alogrithm 2 in the</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,8" id="srcline8">  8</a></span><span class="line"><span class="comment">% paper if the options structure is default.  Algorithm either returns a</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,9" id="srcline9">  9</a></span><span class="line"><span class="comment">% leaf or forms an internal splitting node in which case the function</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,10" id="srcline10"> 10</a></span><span class="line"><span class="comment">% recursively calls itself for each of the children.</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,11" id="srcline11"> 11</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,12" id="srcline12"> 12</a></span><span class="line"><span class="comment">% Inputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,13" id="srcline13"> 13</a></span><span class="line"><span class="comment">%    XTrain      = Array giving training features.  Data should be</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,14" id="srcline14"> 14</a></span><span class="line"><span class="comment">%                  processed using processInputData before being passed to</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,15" id="srcline15"> 15</a></span><span class="line"><span class="comment">%                  CCT</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,16" id="srcline16"> 16</a></span><span class="line"><span class="comment">%    YTrain      = Class data formatted as per output of classExpansion</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,17" id="srcline17"> 17</a></span><span class="line"><span class="comment">%    options     = Options class of type optionsClassCCT.  Some fields are</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,18" id="srcline18"> 18</a></span><span class="line"><span class="comment">%                  updated during recursion</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,19" id="srcline19"> 19</a></span><span class="line"><span class="comment">%    iFeatureNum = Grouping of features as per processInputData.  During</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,20" id="srcline20"> 20</a></span><span class="line"><span class="comment">%                  recursion if a feature is found to be identical across</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,21" id="srcline21"> 21</a></span><span class="line"><span class="comment">%                  data points, the corresponding values in iFeatureNum are</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,22" id="srcline22"> 22</a></span><span class="line"><span class="comment">%                  replaced with NaNs.</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,23" id="srcline23"> 23</a></span><span class="line"><span class="comment">%    depth       = Current tree depth (zero based)</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,24" id="srcline24"> 24</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,25" id="srcline25"> 25</a></span><span class="line"><span class="comment">% Outputs</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,26" id="srcline26"> 26</a></span><span class="line"><span class="comment">%   tree         = Structure containing learnt tree.  Prediction can be</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,27" id="srcline27"> 27</a></span><span class="line"><span class="comment">%                  made using predictFromCCT</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,28" id="srcline28"> 28</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,29" id="srcline29"> 29</a></span><span class="line"><span class="comment">% TR 22/06/15</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,30" id="srcline30"> 30</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,31" id="srcline31"> 31</a></span><span class="line"><span class="comment">%% First do checks for whether we should immediately terminate</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,32" id="srcline32"> 32</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,33" id="srcline33"> 33</a></span><span class="line"><span class="mxinfo" id="T4:U8"><span class="var type1" id="S8T4U13">K</span> = <span class="mxinfo" id="T4:U10">max(<span class="mxinfo" id="T4:U11">2</span>,<span class="mxinfo" id="T4:U12">size(<span class="var type1" id="S4T1U19">YTrain</span>,2)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,34" id="srcline34"> 34</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,35" id="srcline35"> 35</a></span><span class="line"><span class="mxinfo" id="T4:U14"><span class="var type1" id="S11T4U23">nNodesToPreassign</span> = <span class="mxinfo" id="T4:U16">2000</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,36" id="srcline36"> 36</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,37" id="srcline37"> 37</a></span><span class="line"><span class="mxinfo" id="T4:U17"><span class="var type1" id="S12T4U27">variedEmptyRow</span> = <span class="mxinfo" id="T4:U19">zeros(1,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,38" id="srcline38"> 38</a></span><span class="line"><span class="mxinfo" id="T4:U20"><span class="var type1" id="S14T4U34">variedEmptyCol</span> = <span class="mxinfo" id="T4:U22">zeros(1,1)</span>'</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,39" id="srcline39"> 39</a></span><span class="line"><span class="mxinfo" id="T17:U23"><span class="var type1" id="S15T17U42">iPresEmpty</span> = <span class="mxinfo" id="T17:U25">int64(zeros(1,1))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,40" id="srcline40"> 40</a></span><span class="line"><span class="mxinfo" id="T19:U26"><span class="var type1" id="S17T19U51">zeroCol</span> = <span class="mxinfo" id="T19:U28">zeros(2,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,41" id="srcline41"> 41</a></span><span class="line"><span class="mxinfo" id="T18:U29"><span class="var type1" id="S18T18U58">falseCol</span> = <span class="mxinfo" id="T18:U31">false(2,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,42" id="srcline42"> 42</a></span><span class="line"><span class="mxinfo" id="T19:U32"><span class="var type1" id="S20T19U65">stepCol</span> = <span class="mxinfo" id="T19:U34">(1:2)'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,43" id="srcline43"> 43</a></span><span class="line"><span class="mxinfo" id="T20:U35"><span class="var type1" id="S21T20U73">zero2Col</span> = <span class="mxinfo" id="T20:U37">zeros(2,2)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,44" id="srcline44"> 44</a></span><span class="line"><span class="mxinfo" id="T19:U38"><span class="var type1" id="S22T19U80">onesCol</span> = <span class="mxinfo" id="T19:U40">ones(2,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,45" id="srcline45"> 45</a></span><span class="line"><span class="mxinfo" id="T99:U41"><span class="var type1" id="S24T99U87">zeroKCol</span> = <span class="mxinfo" id="T99:U43">zeros(<span class="mxinfo" id="T4:U44">2</span>,<span class="var type1" id="S8T4U91">K</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,46" id="srcline46"> 46</a></span><span class="line"><span class="mxinfo" id="T19:U46"><span class="var type1" id="S25T19U94">nanCol</span> = <span class="mxinfo" id="T19:U48">NaN(2,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,47" id="srcline47"> 47</a></span><span class="line"><span class="mxinfo" id="T21:U49"><span class="var type1" id="S27T21U101">iPresStruct</span> = <span class="mxinfo" id="T21:U51">struct(<span class="string">'inds'</span>,<span class="var type1" id="S15T17U105">iPresEmpty</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,48" id="srcline48"> 48</a></span><span class="line"><span class="mxinfo" id="T22:U53"><span class="var type1" id="S29T22U108">indsStruct</span> = <span class="mxinfo" id="T22:U55">struct(<span class="string">'inds'</span>,<span class="var type1" id="S12T4U112">variedEmptyRow</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,49" id="srcline49"> 49</a></span><span class="line"><span class="mxinfo" id="T24:U57"><span class="var type1" id="S30T24U115">phiStruct</span> = <span class="mxinfo" id="T24:U59">struct(<span class="string">'phi'</span>,<span class="var type1" id="S14T4U119">variedEmptyCol</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,50" id="srcline50"> 50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,51" id="srcline51"> 51</a></span><span class="line"><span class="mxinfo" id="T100:U61"><span class="var type1" id="S2T100U122">tree</span> = struct(<span class="string">'nextChild'</span>,<span class="mxinfo" id="T4:U63">2</span>,<span class="string">'bExpanded'</span>,<span class="mxinfo" id="T18:U64"><span class="var type1" id="S18T18U128">falseCol</span></span>,<span class="string">'nodeId'</span>,<span class="mxinfo" id="T19:U66"><span class="var type1" id="S20T19U130">stepCol</span></span>,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,52" id="srcline52"> 52</a></span><span class="line"><span class="mxinfo" id="T100:U61">    <span class="string">'bLeaf'</span>,<span class="mxinfo" id="T18:U68"><span class="var type1" id="S18T18U132">falseCol</span></span>,<span class="string">'childIds'</span>,<span class="mxinfo" id="T20:U70"><span class="var type1" id="S21T20U134">zero2Col</span></span>,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,53" id="srcline53"> 53</a></span><span class="line"><span class="mxinfo" id="T100:U61">    <span class="string">'parentId'</span>,<span class="mxinfo" id="T19:U72"><span class="var type1" id="S17T19U136">zeroCol</span></span>,<span class="string">'depth'</span>,<span class="mxinfo" id="T19:U74"><span class="var type1" id="S7T4U139">depth</span>*<span class="var type1" id="S22T19U140">onesCol</span></span>,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,54" id="srcline54"> 54</a></span><span class="line"><span class="mxinfo" id="T100:U61">    <span class="string">'iPresent'</span>,<span class="mxinfo" id="T21:U77"><span class="var type1" id="S27T21U142">iPresStruct</span></span>,<span class="string">'iFeatNum'</span>,<span class="mxinfo" id="T22:U79"><span class="var type1" id="S29T22U144">indsStruct</span></span>,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,55" id="srcline55"> 55</a></span><span class="line"><span class="mxinfo" id="T100:U61">    <span class="string">'trainingCounts'</span>,<span class="var type1" id="S24T99U146">zeroKCol</span>,<span class="string">'labelClassId'</span>,<span class="mxinfo" id="T19:U82"><span class="var type1" id="S17T19U148">zeroCol</span></span>,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,56" id="srcline56"> 56</a></span><span class="line"><span class="mxinfo" id="T100:U61">    <span class="string">'partitionPoint'</span>,<span class="mxinfo" id="T19:U84"><span class="var type1" id="S25T19U150">nanCol</span></span>,<span class="string">'iIn'</span>,<span class="mxinfo" id="T22:U86"><span class="var type1" id="S29T22U152">indsStruct</span></span>,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,57" id="srcline57"> 57</a></span><span class="line"><span class="mxinfo" id="T100:U61">    <span class="string">'decisionProjection'</span>,<span class="mxinfo" id="T24:U88"><span class="var type1" id="S30T24U154">phiStruct</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,58" id="srcline58"> 58</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,59" id="srcline59"> 59</a></span><span class="line"><span class="mxinfo" id="T35:U90"><span class="var type1" id="S12T35U157">variedEmptyRow</span> = <span class="mxinfo" id="T35:U92">zeros(1,0)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,60" id="srcline60"> 60</a></span><span class="line"><span class="mxinfo" id="T38:U93"><span class="var type1" id="S14T38U164">variedEmptyCol</span> = <span class="mxinfo" id="T38:U95">zeros(0,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,61" id="srcline61"> 61</a></span><span class="line"><span class="mxinfo" id="T26:U96"><span class="var type1" id="S15T26U171">iPresEmpty</span> = <span class="mxinfo" id="T26:U98">int64(zeros(1,0))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,62" id="srcline62"> 62</a></span><span class="line"><span class="mxinfo" id="T41:U99"><span class="var type1" id="S17T41U180">zeroCol</span> = <span class="mxinfo" id="T41:U101">zeros(<span class="mxinfo" id="T4:U102"><span class="var type1" id="S11T4U183">nNodesToPreassign</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,63" id="srcline63"> 63</a></span><span class="line"><span class="mxinfo" id="T32:U104"><span class="var type1" id="S18T32U187">falseCol</span> = <span class="mxinfo" id="T32:U106"><span class="mxinfo" id="T6:U107">false</span>(<span class="mxinfo" id="T4:U108"><span class="var type1" id="S11T4U190">nNodesToPreassign</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,64" id="srcline64"> 64</a></span><span class="line"><span class="mxinfo" id="T41:U110"><span class="var type1" id="S20T41U194">stepCol</span> = <span class="mxinfo" id="T41:U112">(<span class="mxinfo" id="T25:U113">1:<span class="var type1" id="S11T4U199">nNodesToPreassign</span></span>)'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,65" id="srcline65"> 65</a></span><span class="line"><span class="mxinfo" id="T42:U115"><span class="var type1" id="S21T42U202">zero2Col</span> = <span class="mxinfo" id="T42:U117">zeros(<span class="mxinfo" id="T4:U118"><span class="var type1" id="S11T4U205">nNodesToPreassign</span></span>,<span class="mxinfo" id="T4:U120">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,66" id="srcline66"> 66</a></span><span class="line"><span class="mxinfo" id="T41:U121"><span class="var type1" id="S22T41U209">onesCol</span> = <span class="mxinfo" id="T41:U123">ones(<span class="var type1" id="S11T4U212">nNodesToPreassign</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,67" id="srcline67"> 67</a></span><span class="line"><span class="mxinfo" id="T102:U125"><span class="var type1" id="S24T102U216">zeroKCol</span> = <span class="mxinfo" id="T102:U127">zeros(<span class="mxinfo" id="T4:U128"><span class="var type1" id="S11T4U219">nNodesToPreassign</span></span>,<span class="var type1" id="S8T4U220">K</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,68" id="srcline68"> 68</a></span><span class="line"><span class="mxinfo" id="T41:U131"><span class="var type1" id="S25T41U223">nanCol</span> = <span class="mxinfo" id="T41:U133">NaN(<span class="mxinfo" id="T4:U134"><span class="var type1" id="S11T4U226">nNodesToPreassign</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,69" id="srcline69"> 69</a></span><span class="line"><span class="mxinfo" id="T34:U136"><span class="var type1" id="S27T34U230">iPresStruct</span> = <span class="mxinfo" id="T34:U138">repmat(struct(<span class="string">'inds'</span>,<span class="var type1" id="S15T26U236">iPresEmpty</span>),<span class="var type1" id="S11T4U237">nNodesToPreassign</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,70" id="srcline70"> 70</a></span><span class="line"><span class="mxinfo" id="T37:U141"><span class="var type1" id="S29T37U241">indsStruct</span> = <span class="mxinfo" id="T37:U143">repmat(struct(<span class="string">'inds'</span>,<span class="var type1" id="S12T35U247">variedEmptyRow</span>),<span class="var type1" id="S11T4U248">nNodesToPreassign</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,71" id="srcline71"> 71</a></span><span class="line"><span class="mxinfo" id="T40:U146"><span class="var type1" id="S30T40U252">phiStruct</span> = <span class="mxinfo" id="T40:U148">repmat(struct(<span class="string">'phi'</span>,<span class="var type1" id="S14T38U258">variedEmptyCol</span>),<span class="var type1" id="S11T4U259">nNodesToPreassign</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,72" id="srcline72"> 72</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,73" id="srcline73"> 73</a></span><span class="line"><span class="mxinfo" id="T45:U151"><span class="mxinfo" id="T45:U152"><span class="var type1" id="S2T100U264">tree</span>.bExpanded</span> = <span class="var type1" id="S18T32U266">falseCol</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,74" id="srcline74"> 74</a></span><span class="line"><span class="mxinfo" id="T46:U155"><span class="mxinfo" id="T46:U156"><span class="var type1" id="S2T100U270">tree</span>.nodeId</span> = <span class="var type1" id="S20T41U272">stepCol</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,75" id="srcline75"> 75</a></span><span class="line"><span class="mxinfo" id="T45:U159"><span class="mxinfo" id="T45:U160"><span class="var type1" id="S2T100U276">tree</span>.bLeaf</span> = <span class="var type1" id="S18T32U278">falseCol</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,76" id="srcline76"> 76</a></span><span class="line"><span class="mxinfo" id="T47:U163"><span class="mxinfo" id="T47:U164"><span class="var type1" id="S2T100U282">tree</span>.childIds</span> = <span class="var type1" id="S21T42U284">zero2Col</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,77" id="srcline77"> 77</a></span><span class="line"><span class="mxinfo" id="T46:U167"><span class="mxinfo" id="T46:U168"><span class="var type1" id="S2T100U288">tree</span>.parentId</span> = <span class="var type1" id="S17T41U290">zeroCol</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,78" id="srcline78"> 78</a></span><span class="line"><span class="mxinfo" id="T46:U171"><span class="mxinfo" id="T46:U172"><span class="var type1" id="S2T100U294">tree</span>.depth</span> = <span class="mxinfo" id="T41:U174"><span class="mxinfo" id="T4:U175"><span class="var type1" id="S7T4U297">depth</span></span>*<span class="mxinfo" id="T41:U177"><span class="var type1" id="S22T41U298">onesCol</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,79" id="srcline79"> 79</a></span><span class="line"><span class="mxinfo" id="T48:U179"><span class="mxinfo" id="T48:U180"><span class="var type1" id="S2T100U302">tree</span>.iPresent</span> = <span class="var type1" id="S27T34U304">iPresStruct</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,80" id="srcline80"> 80</a></span><span class="line"><span class="mxinfo" id="T50:U183"><span class="mxinfo" id="T50:U184"><span class="var type1" id="S2T100U308">tree</span>.iFeatNum</span> = <span class="var type1" id="S29T37U310">indsStruct</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,81" id="srcline81"> 81</a></span><span class="line"><span class="mxinfo" id="T101:U187"><span class="mxinfo" id="T101:U188"><span class="var type1" id="S2T100U314">tree</span>.trainingCounts</span> = <span class="var type1" id="S24T102U316">zeroKCol</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,82" id="srcline82"> 82</a></span><span class="line"><span class="mxinfo" id="T46:U191"><span class="mxinfo" id="T46:U192"><span class="var type1" id="S2T100U320">tree</span>.labelClassId</span> = <span class="var type1" id="S17T41U322">zeroCol</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,83" id="srcline83"> 83</a></span><span class="line"><span class="mxinfo" id="T46:U195"><span class="mxinfo" id="T46:U196"><span class="var type1" id="S2T100U326">tree</span>.partitionPoint</span> = <span class="var type1" id="S25T41U328">nanCol</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,84" id="srcline84"> 84</a></span><span class="line"><span class="mxinfo" id="T50:U199"><span class="mxinfo" id="T50:U200"><span class="var type1" id="S2T100U332">tree</span>.iIn</span> = <span class="var type1" id="S29T37U334">indsStruct</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,85" id="srcline85"> 85</a></span><span class="line"><span class="mxinfo" id="T53:U203"><span class="mxinfo" id="T53:U204"><span class="var type1" id="S2T100U338">tree</span>.decisionProjection</span> = <span class="var type1" id="S30T40U340">phiStruct</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,86" id="srcline86"> 86</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,87" id="srcline87"> 87</a></span><span class="line"><span class="mxinfo" id="T51:U207"><span class="mxinfo" id="T51:U208"><span class="mxinfo" id="T149:U209"><span class="mxinfo" id="T50:U210"><span class="var type1" id="S2T100U346">tree</span>.iFeatNum</span>(<span class="mxinfo" id="T4:U212">1</span>)</span>.inds</span> = <span class="var type1" id="S6T51U350">iFeatureNum</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,88" id="srcline88"> 88</a></span><span class="line"><span class="mxinfo" id="T49:U214"><span class="mxinfo" id="T49:U215"><span class="mxinfo" id="T150:U216"><span class="mxinfo" id="T48:U217"><span class="var type1" id="S2T100U356">tree</span>.iPresent</span>(<span class="mxinfo" id="T4:U219">1</span>)</span>.inds</span> = <span class="mxinfo" id="T49:U220">int64((<span class="mxinfo" id="T51:U221">1:<span class="mxinfo" id="T4:U222">size(<span class="var type1" id="S3T52U367">XTrain</span>,1)</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,89" id="srcline89"> 89</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,90" id="srcline90"> 90</a></span><span class="line"><span class="mxinfo" id="T6:U224"><span class="var type1" id="S32T6U371">bComplete</span> = <span class="mxinfo" id="T6:U226">false</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,91" id="srcline91"> 91</a></span><span class="line"><span class="mxinfo" id="T52:U227"><span class="var type1" id="S33T52U376">XTrainGlobal</span> = <span class="var type1" id="S3T52U377">XTrain</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,92" id="srcline92"> 92</a></span><span class="line"><span class="mxinfo" id="T1:U230"><span class="var type1" id="S34T1U380">YTrainGlobal</span> = <span class="var type1" id="S4T1U381">YTrain</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,93" id="srcline93"> 93</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,94" id="srcline94"> 94</a></span><span class="line"><span class="mxinfo" id="T4:U233"><span class="var type1" id="S35T4U384">maxIter</span> = <span class="mxinfo" id="T4:U235"><span class="mxinfo" id="T4:U236"><span class="mxinfo" id="T4:U237">2</span>*<span class="mxinfo" id="T4:U238">size(<span class="var type1" id="S3T52U390">XTrain</span>,1)</span></span>+<span class="mxinfo" id="T4:U240">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,95" id="srcline95"> 95</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,96" id="srcline96"> 96</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S36T4U395">nIter</span>=<span class="mxinfo" id="T4:U242">1</span>:<span class="var type1" id="S35T4U398">maxIter</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,97" id="srcline97"> 97</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="185,98" id="srcline98"> 98</a></span><span class="line">    <span class="keyword">if</span> <span class="var type1" id="S32T6U401">bComplete</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,99" id="srcline99"> 99</a></span><span class="line">        <span class="keyword">break</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,100" id="srcline100">100</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,101" id="srcline101">101</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="185,102" id="srcline102">102</a></span><span class="line">    <span class="mxinfo" id="T104:U245"><span class="var type1" id="S37T104U405">iCalcVarSize</span> = <span class="mxinfo" id="T104:U247">find(<span class="mxinfo" id="T45:U248">~<span class="mxinfo" id="T45:U249"><span class="mxinfo" id="T45:U250"><span class="var type1" id="S2T100U411">tree</span>.bExpanded</span>(<span class="mxinfo" id="T4:U252">1</span>:<span class="mxinfo" id="T4:U253">(<span class="mxinfo" id="T4:U254"><span class="var type1" id="S2T100U418">tree</span>.nextChild</span>)-<span class="mxinfo" id="T4:U256">1</span></span>)</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,103" id="srcline103">103</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T6:U257">isempty(<span class="var type1" id="S37T104U426">iCalcVarSize</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,104" id="srcline104">104</a></span><span class="line">        <span class="keyword">break</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,105" id="srcline105">105</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,106" id="srcline106">106</a></span><span class="line">    <span class="mxinfo" id="T4:U259"><span class="var type1" id="S40T4U430">iCalc</span> = <span class="mxinfo" id="T4:U261"><span class="var type1" id="S37T104U432">iCalcVarSize</span>(<span class="mxinfo" id="T4:U263">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,107" id="srcline107">107</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="185,108" id="srcline108">108</a></span><span class="line">    <span class="mxinfo" id="T51:U264"><span class="var type1" id="S6T51U436">iFeatureNum</span> = <span class="mxinfo" id="T51:U266"><span class="mxinfo" id="T149:U267"><span class="mxinfo" id="T50:U268"><span class="var type1" id="S2T100U440">tree</span>.iFeatNum</span>(<span class="var type1" id="S40T4U442">iCalc</span>)</span>.inds</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,109" id="srcline109">109</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="185,110" id="srcline110">110</a></span><span class="line">    <span class="mxinfo" id="T6:U271">[<span class="var type1" id="S41T6U447">bLeaf</span>, <span class="var type1" id="S42T105U448">bLessThanTrain</span>, <span class="var type1" id="S43T106U449">partitionPoint</span>, <span class="var type1" id="S44T46U450">projMat</span>, <span class="var type1" id="S45T107U451">countsNode</span>, <span class="var type1" id="S46T51U452">iIn</span>] = <span class="fcn" id="F824N3:B454">expandNode</span>(<span class="mxinfo" id="T52:U278"><span class="var type1" id="S33T52U456">XTrainGlobal</span>(<span class="mxinfo" id="T49:U280"><span class="mxinfo" id="T150:U281"><span class="mxinfo" id="T48:U282"><span class="var type1" id="S2T100U460">tree</span>.iPresent</span>(<span class="var type1" id="S40T4U462">iCalc</span>)</span>.inds</span>,:)</span>,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,111" id="srcline111">111</a></span><span class="line"><span class="mxinfo" id="T6:U271">        <span class="mxinfo" id="T1:U285"><span class="var type1" id="S34T1U466">YTrainGlobal</span>(<span class="mxinfo" id="T49:U287"><span class="mxinfo" id="T150:U288"><span class="mxinfo" id="T48:U289"><span class="var type1" id="S2T100U470">tree</span>.iPresent</span>(<span class="var type1" id="S40T4U472">iCalc</span>)</span>.inds</span>,:)</span>,<span class="var type1" id="S5T55U475">options</span>,<span class="var type1" id="S6T51U476">iFeatureNum</span>,<span class="mxinfo" id="T4:U294"><span class="mxinfo" id="T46:U295"><span class="var type1" id="S2T100U479">tree</span>.depth</span>(<span class="var type1" id="S40T4U481">iCalc</span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,112" id="srcline112">112</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="185,113" id="srcline113">113</a></span><span class="line">    <span class="keyword">if</span> <span class="var type1" id="S41T6U484">bLeaf</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,114" id="srcline114">114</a></span><span class="line">        <span class="mxinfo" id="T4:U299"><span class="var type1" id="S48T4U487">maxCounts</span> = <span class="mxinfo" id="T4:U301">max(<span class="var type1" id="S45T107U490">countsNode</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,115" id="srcline115">115</a></span><span class="line">        <span class="mxinfo" id="T108:U303"><span class="var type1" id="S49T108U493">bEqualMaxCounts</span> = <span class="mxinfo" id="T108:U305"><span class="var type1" id="S48T4U495">maxCounts</span> == <span class="var type1" id="S45T107U496">countsNode</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,116" id="srcline116">116</a></span><span class="line">        <span class="mxinfo" id="T4:U308"><span class="var type1" id="S50T4U499">idRecursion</span> = <span class="var type1" id="S40T4U500">iCalc</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,117" id="srcline117">117</a></span><span class="line">        <span class="keyword">while</span> <span class="mxinfo" id="T6:U311"><span class="mxinfo" id="T4:U312">sum(<span class="var type1" id="S49T108U505">bEqualMaxCounts</span>)</span>&gt;<span class="mxinfo" id="T4:U314">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,118" id="srcline118">118</a></span><span class="line">            <span class="mxinfo" id="T4:U315"><span class="var type1" id="S50T4U509">idRecursion</span> = <span class="mxinfo" id="T4:U317"><span class="mxinfo" id="T46:U318"><span class="var type1" id="S2T100U512">tree</span>.parentId</span>(<span class="var type1" id="S50T4U514">idRecursion</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,119" id="srcline119">119</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo" id="T6:U321"><span class="var type1" id="S50T4U518">idRecursion</span>==<span class="mxinfo" id="T4:U323">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="185,120" id="srcline120">120</a></span><span class="line">                <span class="mxinfo" id="T107:U324"><span class="var type1" id="S52T107U522">iContention</span> = <span class="mxinfo" id="T51:U326">find(<span class="var type1" id="S49T108U525">bEqualMaxCounts</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,121" id="srcline121">121</a></span><span class="line">                <span class="mxinfo" id="T4:U328"><span class="var type1" id="S53T4U528">iSel</span> = <span class="mxinfo" id="T4:U330"><span class="var type1" id="S52T107U530">iContention</span>(<span class="mxinfo" id="T4:U332">randi(<span class="mxinfo" id="T4:U333">numel(<span class="var type1" id="S52T107U535">iContention</span>)</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,122" id="srcline122">122</a></span><span class="line">                <span class="mxinfo" id="T108:U335"><span class="var type1" id="S49T108U538">bEqualMaxCounts</span> = <span class="mxinfo" id="T108:U337"><span class="mxinfo" id="T6:U338">false</span>(<span class="mxinfo" id="T16:U339">size(<span class="var type1" id="S49T108U543">bEqualMaxCounts</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,123" id="srcline123">123</a></span><span class="line">                <span class="mxinfo" id="T6:U341"><span class="mxinfo" id="T6:U342"><span class="var type1" id="S49T108U547">bEqualMaxCounts</span>(<span class="var type1" id="S53T4U548">iSel</span>)</span> = <span class="mxinfo" id="T6:U345">true</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,124" id="srcline124">124</a></span><span class="line">                <span class="keyword">break</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,125" id="srcline125">125</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,126" id="srcline126">126</a></span><span class="line">            <span class="mxinfo" id="T107:U346"><span class="var type1" id="S57T107U554">countsAdd</span> = <span class="mxinfo" id="T107:U348">zeros(<span class="mxinfo" id="T16:U349">size(<span class="var type1" id="S45T107U559">countsNode</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,127" id="srcline127">127</a></span><span class="line">            <span class="mxinfo" id="T107:U351"><span class="mxinfo" id="T107:U352"><span class="var type1" id="S57T107U563">countsAdd</span>(<span class="var type1" id="S49T108U564">bEqualMaxCounts</span>)</span> = <span class="mxinfo" id="T51:U355"><span class="mxinfo" id="T107:U356"><span class="mxinfo" id="T101:U357"><span class="var type1" id="S2T100U568">tree</span>.trainingCounts</span>(<span class="var type1" id="S50T4U570">idRecursion</span>,<span class="var type1" id="S49T108U571">bEqualMaxCounts</span>)</span>/(<span class="mxinfo" id="T4:U361"><span class="mxinfo" id="T4:U362">1e4</span>*<span class="mxinfo" id="T4:U363">sum(<span class="mxinfo" id="T107:U364"><span class="mxinfo" id="T101:U365"><span class="var type1" id="S2T100U579">tree</span>.trainingCounts</span>(<span class="var type1" id="S50T4U581">idRecursion</span>,<span class="var type1" id="S49T108U582">bEqualMaxCounts</span>)</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,128" id="srcline128">128</a></span><span class="line">            <span class="mxinfo" id="T107:U369"><span class="var type1" id="S58T107U585">countsTieBreak</span> = <span class="mxinfo" id="T107:U371"><span class="var type1" id="S45T107U587">countsNode</span>+<span class="var type1" id="S57T107U588">countsAdd</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,129" id="srcline129">129</a></span><span class="line">            <span class="mxinfo" id="T4:U374"><span class="var type1" id="S48T4U591">maxCounts</span> = <span class="mxinfo" id="T4:U376">max(<span class="var type1" id="S58T107U594">countsTieBreak</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,130" id="srcline130">130</a></span><span class="line">            <span class="mxinfo" id="T108:U378"><span class="var type1" id="S49T108U597">bEqualMaxCounts</span> = <span class="mxinfo" id="T108:U380"><span class="var type1" id="S48T4U599">maxCounts</span> == <span class="var type1" id="S58T107U600">countsTieBreak</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,131" id="srcline131">131</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,132" id="srcline132">132</a></span><span class="line">        <span class="mxinfo" id="T6:U383"><span class="mxinfo" id="T6:U384"><span class="mxinfo" id="T45:U385"><span class="var type1" id="S2T100U605">tree</span>.bLeaf</span>(<span class="var type1" id="S40T4U607">iCalc</span>)</span> = <span class="mxinfo" id="T6:U388">true</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,133" id="srcline133">133</a></span><span class="line">        <span class="mxinfo" id="T49:U389"><span class="mxinfo" id="T49:U390"><span class="mxinfo" id="T150:U391"><span class="mxinfo" id="T48:U392"><span class="var type1" id="S2T100U615">tree</span>.iPresent</span>(<span class="var type1" id="S40T4U617">iCalc</span>)</span>.inds</span> = <span class="mxinfo" id="T26:U395">int64(<span class="mxinfo" id="T35:U396">zeros(1,0)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,134" id="srcline134">134</a></span><span class="line">        <span class="mxinfo" id="T51:U397"><span class="mxinfo" id="T51:U398"><span class="mxinfo" id="T149:U399"><span class="mxinfo" id="T50:U400"><span class="var type1" id="S2T100U630">tree</span>.iFeatNum</span>(<span class="var type1" id="S40T4U632">iCalc</span>)</span>.inds</span> = <span class="mxinfo" id="T35:U403">zeros(<span class="mxinfo" id="T4:U404">1</span>,<span class="mxinfo" id="T4:U405">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,135" id="srcline135">135</a></span><span class="line">        <span class="mxinfo" id="T107:U406"><span class="mxinfo" id="T107:U407"><span class="mxinfo" id="T101:U408"><span class="var type1" id="S2T100U642">tree</span>.trainingCounts</span>(<span class="var type1" id="S40T4U644">iCalc</span>,:)</span> = <span class="var type1" id="S45T107U646">countsNode</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,136" id="srcline136">136</a></span><span class="line">        <span class="mxinfo" id="T4:U412"><span class="mxinfo" id="T4:U413"><span class="mxinfo" id="T46:U414"><span class="var type1" id="S2T100U651">tree</span>.labelClassId</span>(<span class="var type1" id="S40T4U653">iCalc</span>)</span> = <span class="mxinfo" id="T51:U417">find(<span class="var type1" id="S49T108U656">bEqualMaxCounts</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,137" id="srcline137">137</a></span><span class="line">        <span class="mxinfo" id="T6:U419"><span class="mxinfo" id="T6:U420"><span class="mxinfo" id="T45:U421"><span class="var type1" id="S2T100U661">tree</span>.bExpanded</span>(<span class="var type1" id="S40T4U663">iCalc</span>)</span> = <span class="mxinfo" id="T6:U424">true</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,138" id="srcline138">138</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,139" id="srcline139">139</a></span><span class="line">         <span class="keyword">if</span> <span class="mxinfo" id="T6:U425"><span class="mxinfo" id="T4:U426"><span class="var type1" id="S2T100U671">tree</span>.nextChild</span>&gt;(<span class="mxinfo" id="T4:U428"><span class="mxinfo" id="T4:U429">numel(<span class="mxinfo" id="T45:U430"><span class="var type1" id="S2T100U678">tree</span>.bLeaf</span>)</span>-<span class="mxinfo" id="T4:U432">1</span></span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,140" id="srcline140">140</a></span><span class="line">             <span class="mxinfo" id="T45:U433"><span class="mxinfo" id="T45:U434"><span class="var type1" id="S2T100U684">tree</span>.bExpanded</span> = <span class="mxinfo" id="T45:U436">[<span class="mxinfo" id="T45:U437"><span class="var type1" id="S2T100U689">tree</span>.bExpanded</span>;<span class="var type1" id="S18T32U692">falseCol</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,141" id="srcline141">141</a></span><span class="line">             <span class="mxinfo" id="T46:U440"><span class="mxinfo" id="T46:U441"><span class="var type1" id="S2T100U696">tree</span>.nodeId</span> = <span class="mxinfo" id="T46:U443">[<span class="mxinfo" id="T46:U444"><span class="var type1" id="S2T100U701">tree</span>.nodeId</span>;(<span class="mxinfo" id="T41:U446"><span class="mxinfo" id="T4:U447"><span class="mxinfo" id="T46:U448"><span class="var type1" id="S2T100U708">tree</span>.nodeId</span>(<span class="mxinfo" id="T4:U450">end</span>)</span>+<span class="var type1" id="S20T41U712">stepCol</span></span>)]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,142" id="srcline142">142</a></span><span class="line">             <span class="mxinfo" id="T45:U452"><span class="mxinfo" id="T45:U453"><span class="var type1" id="S2T100U716">tree</span>.bLeaf</span> = <span class="mxinfo" id="T45:U455">[<span class="mxinfo" id="T45:U456"><span class="var type1" id="S2T100U721">tree</span>.bLeaf</span>;<span class="var type1" id="S18T32U724">falseCol</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,143" id="srcline143">143</a></span><span class="line">             <span class="mxinfo" id="T47:U459"><span class="mxinfo" id="T47:U460"><span class="var type1" id="S2T100U728">tree</span>.childIds</span> = <span class="mxinfo" id="T47:U462">[<span class="mxinfo" id="T47:U463"><span class="var type1" id="S2T100U733">tree</span>.childIds</span>;<span class="var type1" id="S21T42U736">zero2Col</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,144" id="srcline144">144</a></span><span class="line">             <span class="mxinfo" id="T46:U466"><span class="mxinfo" id="T46:U467"><span class="var type1" id="S2T100U740">tree</span>.parentId</span> = <span class="mxinfo" id="T46:U469">[<span class="mxinfo" id="T46:U470"><span class="var type1" id="S2T100U745">tree</span>.parentId</span>;<span class="var type1" id="S17T41U748">zeroCol</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,145" id="srcline145">145</a></span><span class="line">             <span class="mxinfo" id="T46:U473"><span class="mxinfo" id="T46:U474"><span class="var type1" id="S2T100U752">tree</span>.depth</span> = <span class="mxinfo" id="T46:U476">[<span class="mxinfo" id="T46:U477"><span class="var type1" id="S2T100U757">tree</span>.depth</span>;<span class="var type1" id="S17T41U760">zeroCol</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,146" id="srcline146">146</a></span><span class="line">             <span class="mxinfo" id="T48:U480"><span class="mxinfo" id="T48:U481"><span class="var type1" id="S2T100U764">tree</span>.iPresent</span> = <span class="mxinfo" id="T48:U483">[<span class="mxinfo" id="T48:U484"><span class="var type1" id="S2T100U769">tree</span>.iPresent</span>;<span class="var type1" id="S27T34U772">iPresStruct</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,147" id="srcline147">147</a></span><span class="line">             <span class="mxinfo" id="T50:U487"><span class="mxinfo" id="T50:U488"><span class="var type1" id="S2T100U776">tree</span>.iFeatNum</span> = <span class="mxinfo" id="T50:U490">[<span class="mxinfo" id="T50:U491"><span class="var type1" id="S2T100U781">tree</span>.iFeatNum</span>;<span class="var type1" id="S29T37U784">indsStruct</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,148" id="srcline148">148</a></span><span class="line">             <span class="mxinfo" id="T101:U494"><span class="mxinfo" id="T101:U495"><span class="var type1" id="S2T100U788">tree</span>.trainingCounts</span> = <span class="mxinfo" id="T47:U497">[<span class="mxinfo" id="T101:U498"><span class="var type1" id="S2T100U793">tree</span>.trainingCounts</span>;<span class="var type1" id="S21T42U796">zero2Col</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,149" id="srcline149">149</a></span><span class="line">             <span class="mxinfo" id="T46:U501"><span class="mxinfo" id="T46:U502"><span class="var type1" id="S2T100U800">tree</span>.labelClassId</span> = <span class="mxinfo" id="T46:U504">[<span class="mxinfo" id="T46:U505"><span class="var type1" id="S2T100U805">tree</span>.labelClassId</span>;<span class="var type1" id="S17T41U808">zeroCol</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,150" id="srcline150">150</a></span><span class="line">             <span class="mxinfo" id="T46:U508"><span class="mxinfo" id="T46:U509"><span class="var type1" id="S2T100U812">tree</span>.partitionPoint</span> = <span class="mxinfo" id="T46:U511">[<span class="mxinfo" id="T46:U512"><span class="var type1" id="S2T100U817">tree</span>.partitionPoint</span>;<span class="var type1" id="S25T41U820">nanCol</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,151" id="srcline151">151</a></span><span class="line">             <span class="mxinfo" id="T50:U515"><span class="mxinfo" id="T50:U516"><span class="var type1" id="S2T100U824">tree</span>.iIn</span> = <span class="mxinfo" id="T50:U518">[<span class="mxinfo" id="T50:U519"><span class="var type1" id="S2T100U829">tree</span>.iIn</span>;<span class="var type1" id="S29T37U832">indsStruct</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,152" id="srcline152">152</a></span><span class="line">             <span class="mxinfo" id="T53:U522"><span class="mxinfo" id="T53:U523"><span class="var type1" id="S2T100U836">tree</span>.decisionProjection</span> = <span class="mxinfo" id="T53:U525">[<span class="mxinfo" id="T53:U526"><span class="var type1" id="S2T100U841">tree</span>.decisionProjection</span>;<span class="var type1" id="S30T40U844">phiStruct</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,153" id="srcline153">153</a></span><span class="line">         <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,154" id="srcline154">154</a></span><span class="line">        <span class="mxinfo" id="T6:U529"><span class="mxinfo" id="T6:U530"><span class="mxinfo" id="T45:U531"><span class="var type1" id="S2T100U849">tree</span>.bLeaf</span>(<span class="var type1" id="S40T4U851">iCalc</span>)</span> = <span class="mxinfo" id="T6:U534">false</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,155" id="srcline155">155</a></span><span class="line">        <span class="mxinfo" id="T16:U535"><span class="var type1" id="S60T16U856">childIds</span> = <span class="mxinfo" id="T16:U537"><span class="mxinfo" id="T4:U538"><span class="var type1" id="S2T100U859">tree</span>.nextChild</span>+<span class="mxinfo" id="T16:U540">[<span class="mxinfo" id="T4:U541">0</span>,<span class="mxinfo" id="T4:U542">1</span>]</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,156" id="srcline156">156</a></span><span class="line">        <span class="mxinfo" id="T16:U543"><span class="mxinfo" id="T16:U544"><span class="mxinfo" id="T47:U545"><span class="var type1" id="S2T100U869">tree</span>.childIds</span>(<span class="var type1" id="S40T4U871">iCalc</span>,:)</span> = <span class="var type1" id="S60T16U873">childIds</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,157" id="srcline157">157</a></span><span class="line">        <span class="mxinfo" id="T16:U549"><span class="mxinfo" id="T16:U550"><span class="mxinfo" id="T46:U551"><span class="var type1" id="S2T100U878">tree</span>.depth</span>(<span class="var type1" id="S60T16U880">childIds</span>)</span> = <span class="mxinfo" id="T4:U554"><span class="mxinfo" id="T4:U555"><span class="mxinfo" id="T46:U556"><span class="var type1" id="S2T100U884">tree</span>.depth</span>(<span class="var type1" id="S40T4U886">iCalc</span>)</span>+<span class="mxinfo" id="T4:U559">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,158" id="srcline158">158</a></span><span class="line">        <span class="mxinfo" id="T49:U560"><span class="mxinfo" id="T49:U561"><span class="mxinfo" id="T150:U562"><span class="mxinfo" id="T48:U563"><span class="var type1" id="S2T100U893">tree</span>.iPresent</span>(<span class="mxinfo" id="T4:U565"><span class="var type1" id="S60T16U896">childIds</span>(<span class="mxinfo" id="T4:U567">1</span>)</span>)</span>.inds</span> = <span class="mxinfo" id="T49:U568"><span class="mxinfo" id="T49:U569"><span class="mxinfo" id="T150:U570"><span class="mxinfo" id="T48:U571"><span class="var type1" id="S2T100U903">tree</span>.iPresent</span>(<span class="var type1" id="S40T4U905">iCalc</span>)</span>.inds</span>(<span class="var type1" id="S42T105U907">bLessThanTrain</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,159" id="srcline159">159</a></span><span class="line">        <span class="mxinfo" id="T49:U575"><span class="mxinfo" id="T49:U576"><span class="mxinfo" id="T150:U577"><span class="mxinfo" id="T48:U578"><span class="var type1" id="S2T100U913">tree</span>.iPresent</span>(<span class="mxinfo" id="T4:U580"><span class="var type1" id="S60T16U916">childIds</span>(<span class="mxinfo" id="T4:U582">2</span>)</span>)</span>.inds</span> = <span class="mxinfo" id="T49:U583"><span class="mxinfo" id="T49:U584"><span class="mxinfo" id="T150:U585"><span class="mxinfo" id="T48:U586"><span class="var type1" id="S2T100U923">tree</span>.iPresent</span>(<span class="var type1" id="S40T4U925">iCalc</span>)</span>.inds</span>(<span class="mxinfo" id="T105:U589">~<span class="var type1" id="S42T105U928">bLessThanTrain</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,160" id="srcline160">160</a></span><span class="line">        <span class="mxinfo" id="T49:U591"><span class="mxinfo" id="T49:U592"><span class="mxinfo" id="T150:U593"><span class="mxinfo" id="T48:U594"><span class="var type1" id="S2T100U934">tree</span>.iPresent</span>(<span class="var type1" id="S40T4U936">iCalc</span>)</span>.inds</span> = <span class="mxinfo" id="T26:U597">int64(<span class="mxinfo" id="T35:U598">zeros(1,0)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,161" id="srcline161">161</a></span><span class="line">        <span class="mxinfo" id="T51:U599"><span class="mxinfo" id="T51:U600"><span class="mxinfo" id="T149:U601"><span class="mxinfo" id="T50:U602"><span class="var type1" id="S2T100U949">tree</span>.iFeatNum</span>(<span class="var type1" id="S40T4U951">iCalc</span>)</span>.inds</span> = <span class="mxinfo" id="T35:U605">zeros(<span class="mxinfo" id="T4:U606">1</span>,<span class="mxinfo" id="T4:U607">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,162" id="srcline162">162</a></span><span class="line">        <span class="mxinfo" id="T51:U608"><span class="mxinfo" id="T51:U609"><span class="mxinfo" id="T149:U610"><span class="mxinfo" id="T50:U611"><span class="var type1" id="S2T100U962">tree</span>.iFeatNum</span>(<span class="mxinfo" id="T4:U613"><span class="var type1" id="S60T16U965">childIds</span>(<span class="mxinfo" id="T4:U615">1</span>)</span>)</span>.inds</span> = <span class="var type1" id="S6T51U968">iFeatureNum</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,163" id="srcline163">163</a></span><span class="line">        <span class="mxinfo" id="T51:U617"><span class="mxinfo" id="T51:U618"><span class="mxinfo" id="T149:U619"><span class="mxinfo" id="T50:U620"><span class="var type1" id="S2T100U974">tree</span>.iFeatNum</span>(<span class="mxinfo" id="T4:U622"><span class="var type1" id="S60T16U977">childIds</span>(<span class="mxinfo" id="T4:U624">2</span>)</span>)</span>.inds</span> = <span class="var type1" id="S6T51U980">iFeatureNum</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,164" id="srcline164">164</a></span><span class="line">        <span class="mxinfo" id="T107:U626"><span class="mxinfo" id="T107:U627"><span class="mxinfo" id="T101:U628"><span class="var type1" id="S2T100U985">tree</span>.trainingCounts</span>(<span class="var type1" id="S40T4U987">iCalc</span>,:)</span> = <span class="var type1" id="S45T107U989">countsNode</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,165" id="srcline165">165</a></span><span class="line">        <span class="mxinfo" id="T4:U632">[<span class="mxinfo" id="T4:U633"><span class="mxinfo" id="T4:U634">~</span></span>,<span class="mxinfo" id="T46:U635"><span class="var type1" id="S2T100U996">tree</span>.labelClassId</span>(<span class="var type1" id="S40T4U998">iCalc</span>)] = max(<span class="var type1" id="S45T107U1001">countsNode</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,166" id="srcline166">166</a></span><span class="line">        <span class="mxinfo" id="T4:U639"><span class="mxinfo" id="T4:U640"><span class="mxinfo" id="T46:U641"><span class="var type1" id="S2T100U1006">tree</span>.partitionPoint</span>(<span class="var type1" id="S40T4U1008">iCalc</span>)</span> = <span class="var type1" id="S43T106U1009">partitionPoint</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,167" id="srcline167">167</a></span><span class="line">        <span class="mxinfo" id="T51:U645"><span class="mxinfo" id="T51:U646"><span class="mxinfo" id="T149:U647"><span class="mxinfo" id="T50:U648"><span class="var type1" id="S2T100U1015">tree</span>.iIn</span>(<span class="var type1" id="S40T4U1017">iCalc</span>)</span>.inds</span> = <span class="var type1" id="S46T51U1019">iIn</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,168" id="srcline168">168</a></span><span class="line">        <span class="mxinfo" id="T46:U652"><span class="mxinfo" id="T46:U653"><span class="mxinfo" id="T151:U654"><span class="mxinfo" id="T53:U655"><span class="var type1" id="S2T100U1025">tree</span>.decisionProjection</span>(<span class="var type1" id="S40T4U1027">iCalc</span>)</span>.phi</span> = <span class="var type1" id="S44T46U1029">projMat</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,169" id="srcline169">169</a></span><span class="line">        <span class="mxinfo" id="T16:U659"><span class="mxinfo" id="T16:U660"><span class="mxinfo" id="T46:U661"><span class="var type1" id="S2T100U1034">tree</span>.parentId</span>(<span class="var type1" id="S60T16U1036">childIds</span>)</span> = <span class="var type1" id="S40T4U1037">iCalc</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,170" id="srcline170">170</a></span><span class="line">        <span class="mxinfo" id="T4:U665"><span class="mxinfo" id="T4:U666"><span class="var type1" id="S2T100U1041">tree</span>.nextChild</span> = <span class="mxinfo" id="T4:U668"><span class="mxinfo" id="T4:U669"><span class="var type1" id="S2T100U1045">tree</span>.nextChild</span>+<span class="mxinfo" id="T4:U671">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,171" id="srcline171">171</a></span><span class="line">        <span class="mxinfo" id="T6:U672"><span class="mxinfo" id="T6:U673"><span class="mxinfo" id="T45:U674"><span class="var type1" id="S2T100U1052">tree</span>.bExpanded</span>(<span class="var type1" id="S40T4U1054">iCalc</span>)</span> = <span class="mxinfo" id="T6:U677">true</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,172" id="srcline172">172</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,173" id="srcline173">173</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="185,174" id="srcline174">174</a></span><span class="line">    <span class="mxinfo" id="T6:U678"><span class="var type1" id="S32T6U1059">bComplete</span> = <span class="mxinfo" id="T6:U680">all(<span class="mxinfo" id="T45:U681"><span class="mxinfo" id="T45:U682"><span class="var type1" id="S2T100U1064">tree</span>.bExpanded</span>(<span class="mxinfo" id="T4:U684">1</span>:<span class="mxinfo" id="T4:U685">(<span class="mxinfo" id="T4:U686"><span class="var type1" id="S2T100U1071">tree</span>.nextChild</span>)-<span class="mxinfo" id="T4:U688">1</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,175" id="srcline175">175</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="185,176" id="srcline176">176</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="185,177" id="srcline177">177</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,178" id="srcline178">178</a></span><span class="line"><span class="mxinfo" id="T4:U689"><span class="var type1" id="S62T4U1076">fi</span> = (<span class="mxinfo" id="T4:U691"><span class="mxinfo" id="T4:U692"><span class="var type1" id="S2T100U1080">tree</span>.nextChild</span>-<span class="mxinfo" id="T4:U694">1</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,179" id="srcline179">179</a></span><span class="line"><span class="mxinfo" id="T46:U695"><span class="mxinfo" id="T46:U696"><span class="var type1" id="S2T100U1086">tree</span>.nodeId</span> = <span class="mxinfo" id="T46:U698"><span class="mxinfo" id="T46:U699"><span class="var type1" id="S2T100U1090">tree</span>.nodeId</span>(<span class="mxinfo" id="T4:U701">1</span>:<span class="var type1" id="S62T4U1094">fi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,180" id="srcline180">180</a></span><span class="line"><span class="mxinfo" id="T45:U703"><span class="mxinfo" id="T45:U704"><span class="var type1" id="S2T100U1098">tree</span>.bLeaf</span> = <span class="mxinfo" id="T45:U706"><span class="mxinfo" id="T45:U707"><span class="var type1" id="S2T100U1102">tree</span>.bLeaf</span>(<span class="mxinfo" id="T4:U709">1</span>:<span class="var type1" id="S62T4U1106">fi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,181" id="srcline181">181</a></span><span class="line"><span class="mxinfo" id="T47:U711"><span class="mxinfo" id="T47:U712"><span class="var type1" id="S2T100U1110">tree</span>.childIds</span> = <span class="mxinfo" id="T47:U714"><span class="mxinfo" id="T47:U715"><span class="var type1" id="S2T100U1114">tree</span>.childIds</span>(<span class="mxinfo" id="T6:U717"><span class="mxinfo" id="T4:U718">1</span>:<span class="var type1" id="S62T4U1118">fi</span></span>,:)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,182" id="srcline182">182</a></span><span class="line"><span class="mxinfo" id="T46:U720"><span class="mxinfo" id="T46:U721"><span class="var type1" id="S2T100U1123">tree</span>.parentId</span> = <span class="mxinfo" id="T46:U723"><span class="mxinfo" id="T46:U724"><span class="var type1" id="S2T100U1127">tree</span>.parentId</span>(<span class="mxinfo" id="T4:U726">1</span>:<span class="var type1" id="S62T4U1131">fi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,183" id="srcline183">183</a></span><span class="line"><span class="mxinfo" id="T46:U728"><span class="mxinfo" id="T46:U729"><span class="var type1" id="S2T100U1135">tree</span>.depth</span> = <span class="mxinfo" id="T46:U731"><span class="mxinfo" id="T46:U732"><span class="var type1" id="S2T100U1139">tree</span>.depth</span>(<span class="mxinfo" id="T4:U734">1</span>:<span class="var type1" id="S62T4U1143">fi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,184" id="srcline184">184</a></span><span class="line"><span class="mxinfo" id="T101:U736"><span class="mxinfo" id="T101:U737"><span class="var type1" id="S2T100U1147">tree</span>.trainingCounts</span> = <span class="mxinfo" id="T101:U739"><span class="mxinfo" id="T101:U740"><span class="var type1" id="S2T100U1151">tree</span>.trainingCounts</span>(<span class="mxinfo" id="T6:U742"><span class="mxinfo" id="T4:U743">1</span>:<span class="var type1" id="S62T4U1155">fi</span></span>,:)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,185" id="srcline185">185</a></span><span class="line"><span class="mxinfo" id="T46:U745"><span class="mxinfo" id="T46:U746"><span class="var type1" id="S2T100U1160">tree</span>.labelClassId</span> = <span class="mxinfo" id="T46:U748"><span class="mxinfo" id="T46:U749"><span class="var type1" id="S2T100U1164">tree</span>.labelClassId</span>(<span class="mxinfo" id="T4:U751">1</span>:<span class="var type1" id="S62T4U1168">fi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,186" id="srcline186">186</a></span><span class="line"><span class="mxinfo" id="T46:U753"><span class="mxinfo" id="T46:U754"><span class="var type1" id="S2T100U1172">tree</span>.partitionPoint</span> = <span class="mxinfo" id="T46:U756"><span class="mxinfo" id="T46:U757"><span class="var type1" id="S2T100U1176">tree</span>.partitionPoint</span>(<span class="mxinfo" id="T4:U759">1</span>:<span class="var type1" id="S62T4U1180">fi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,187" id="srcline187">187</a></span><span class="line"><span class="mxinfo" id="T50:U761"><span class="mxinfo" id="T50:U762"><span class="var type1" id="S2T100U1184">tree</span>.iIn</span> = <span class="mxinfo" id="T50:U764"><span class="mxinfo" id="T50:U765"><span class="var type1" id="S2T100U1188">tree</span>.iIn</span>(<span class="mxinfo" id="T4:U767">1</span>:<span class="var type1" id="S62T4U1192">fi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,188" id="srcline188">188</a></span><span class="line"><span class="mxinfo" id="T53:U769"><span class="mxinfo" id="T53:U770"><span class="var type1" id="S2T100U1196">tree</span>.decisionProjection</span> = <span class="mxinfo" id="T53:U772"><span class="mxinfo" id="T53:U773"><span class="var type1" id="S2T100U1200">tree</span>.decisionProjection</span>(<span class="mxinfo" id="T4:U775">1</span>:<span class="var type1" id="S62T4U1204">fi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,189" id="srcline189">189</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,190" id="srcline190">190</a></span><span class="line"><span class="mxinfo" id="T4:U777"><span class="mxinfo" id="T4:U778"><span class="var type1" id="S2T100U1208">tree</span>.nextChild</span> = <span class="mxinfo" id="T4:U780">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="185,191" id="srcline191">191</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="185,192" id="srcline192">192</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
